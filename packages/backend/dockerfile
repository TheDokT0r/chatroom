FROM oven/bun:latest AS build
WORKDIR /app
COPY . .
RUN bun i
RUN bun build ./src/index.ts --compile --outfile /build

FROM debian:latest AS base
COPY --from=build /build /usr/bin/app
RUN chmod +x /usr/bin/app
ENV PORT=80
EXPOSE 80
CMD ["app" ]